<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="seller/fragments/head :: head">
    <title>Quản lý Feedback - Seller</title>
</head>
<body>

<div class="dashboard-container">
    <!-- Sidebar -->
    <div th:replace="seller/fragments/sidebar :: sidebar"></div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <div th:replace="seller/fragments/header :: header"></div>

        <!-- Feedback Management Page -->
        <div class="feedback-container">
            <!-- Page Header -->
            <div class="feedback-header">
                <div class="feedback-header-left">
                    <div class="feedback-header-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div>
                        <h1>Quản lý Feedback</h1>
                        <p>Xem và phản hồi đánh giá từ khách hàng</p>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="feedback-stats">
                <div class="feedback-stat-card">
                    <div class="feedback-stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="feedback-stat-content">
                        <div class="feedback-stat-value" th:text="${stats.totalReviews}">0</div>
                        <div class="feedback-stat-label">Tổng đánh giá</div>
                    </div>
                </div>

                <div class="feedback-stat-card">
                    <div class="feedback-stat-icon">
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <div class="feedback-stat-content">
                        <div class="feedback-stat-value" th:text="${stats.averageRating}">0.0</div>
                        <div class="feedback-stat-label">Điểm trung bình</div>
                    </div>
                </div>

                <div class="feedback-stat-card">
                    <div class="feedback-stat-icon">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="feedback-stat-content">
                        <div class="feedback-stat-value" th:text="${stats.reviewsWithImages}">0</div>
                        <div class="feedback-stat-label">Có hình ảnh</div>
                    </div>
                </div>
            </div>

            <!-- Filter Section -->
            <div class="feedback-filter">
                <form th:action="@{/seller/reviews}" method="get" class="feedback-filter-form">
                    <div class="feedback-filter-row">
                        <div class="feedback-filter-group">
                            <label>Đánh giá</label>
                            <select name="rating" class="feedback-filter-select">
                                <option value="">Tất cả</option>
                                <option value="5">5 sao</option>
                                <option value="4">4 sao</option>
                                <option value="3">3 sao</option>
                                <option value="2">2 sao</option>
                                <option value="1">1 sao</option>
                            </select>
                        </div>

                        <div class="feedback-filter-group">
                            <label>Sản phẩm</label>
                            <select name="productId" class="feedback-filter-select">
                                <option value="">Tất cả sản phẩm</option>
                                <option th:each="product : ${products}"
                                        th:value="${product.id}"
                                        th:text="${product.name}">Product Name</option>
                            </select>
                        </div>

                        <div class="feedback-filter-group">
                            <label>Từ ngày</label>
                            <input type="date" name="fromDate" class="feedback-filter-input">
                        </div>

                        <div class="feedback-filter-group">
                            <label>Đến ngày</label>
                            <input type="date" name="toDate" class="feedback-filter-input">
                        </div>
                    </div>

                    <div class="feedback-filter-actions">
                        <button type="submit" class="feedback-filter-btn">
                            <i class="fas fa-search"></i>
                            Lọc
                        </button>
                        <a href="/seller/reviews" class="feedback-clear-btn">
                            <i class="fas fa-times"></i>
                            Xóa bộ lọc
                        </a>
                    </div>
                </form>
            </div>

            <!-- Reviews List -->
            <div class="feedback-reviews">
                <div class="feedback-reviews-header">
                    <h2>Danh sách đánh giá</h2>
                    <div class="feedback-reviews-count" th:text="${reviews.size()} + ' đánh giá'">0 đánh giá</div>
                </div>

                <div class="feedback-reviews-list">
                    <div th:each="review : ${reviews}" class="feedback-review-item">
                        <div class="feedback-review-header">
                            <div class="feedback-review-product">
                                <div class="feedback-product-image">
                                    <img th:if="${review.productImage != null}"
                                         th:src="${review.productImage}"
                                         alt="Product Image"
                                         class="feedback-product-img">
                                    <div th:if="${review.productImage == null}"
                                         class="feedback-product-placeholder">
                                        <i class="fas fa-image"></i>
                                    </div>
                                </div>
                                <div class="feedback-product-info">
                                    <div class="feedback-product-name" th:text="${review.productName}">Product Name</div>
                                    <div class="feedback-review-rating">
                                        <div class="feedback-stars">
                                            <i th:each="i : ${#numbers.sequence(1, 5)}"
                                               th:class="${i <= review.rating ? 'fas fa-star feedback-star-filled' : 'far fa-star feedback-star-empty'}"></i>
                                        </div>
                                        <span class="feedback-rating-text" th:text="${review.rating} + '/5'">5/5</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feedback-review-meta">
                                <div class="feedback-review-date" th:text="${#temporals.format(review.createdAt, 'dd/MM/yyyy')}">01/01/2024</div>
                                <div class="feedback-review-customer" th:text="${review.customerName}">Customer Name</div>
                            </div>
                        </div>

                        <div class="feedback-review-content">
                            <p class="feedback-review-text" th:text="${review.comment}">Review text</p>
                        </div>

                        <div th:if="${review.reviewImages != null and !review.reviewImages.isEmpty()}" class="feedback-review-images">
                            <div class="feedback-images-grid">
                                <img th:each="image : ${review.reviewImages}"
                                     th:src="${image}"
                                     alt="Review Image"
                                     class="feedback-review-image">
                            </div>
                        </div>

                        <div class="feedback-review-actions">
                            <a  th:if="${review.reply == null}" th:href="@{/seller/reviews/{id}(id=${review.reviewId})}" class="feedback-action-btn feedback-action-reply">
                                <i class="fas fa-reply"></i>
                                Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div th:if="${reviews.isEmpty()}" class="feedback-empty">
                    <div class="feedback-empty-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <h3>Chưa có đánh giá nào</h3>
                    <p>Khách hàng chưa đánh giá sản phẩm của bạn</p>
                </div>
            </div>
        </div>
    </main>
</div>

</body>
</html> 